<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fa">
<head>
    <title>تقویم</title>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link type="text/css" href="Style/jquery-ui-1.8.14.css" rel="stylesheet" />

    <script type="text/javascript" src="Script/jquery-1.6.2.min.js"></script>
	<script type="text/javascript" src="Script/jquery.ui.datepicker-cc.all.min.js"></script>

    <script language="javascript" type="text/javascript">
        var oCurrentDate = window.dialogArguments;
        function Window_Onload() {

            var iCurrentYear = ((isNaN(parseInt(oCurrentDate.Year, 10)) || parseInt(oCurrentDate.Year, 10) < 1300 || parseInt(oCurrentDate.Year, 10) > 1400) ? -1 : parseInt(oCurrentDate.Year, 10))
            var iCurrentMonth = ((isNaN(parseInt(oCurrentDate.Month, 10)) || parseInt(oCurrentDate.Month, 10) < 1 || parseInt(oCurrentDate.Month, 10) > 12) ? -1 : parseInt(oCurrentDate.Month, 10))
            var iCurrentDay = ((isNaN(parseInt(oCurrentDate.Day, 10)) || parseInt(oCurrentDate.Day, 10) < 1 || parseInt(oCurrentDate.Day, 10) > 31) ? -1 : parseInt(oCurrentDate.Day, 10))
            /**********************************************************/
//            /*******اضافه شده توسط الياس سربند در تاريخ 87/01/20*******/
//            cal.holiday = oCurrentDate.Holiday
//            /**********************************************************/
//            if (iCurrentYear == -1 || iCurrentMonth == -1 || iCurrentDay == -1)
//                return;

//            cal.year = iCurrentYear;
//            cal.month = iCurrentMonth;
//            cal.day = iCurrentDay;
//            alert('Yes')
            var pickerOpts = {
                dateFormat: 'dd/mm/yy',
                onSelect: OnSelectCalendar,
                altField: '#txtJCal',
                altFormat: 'dd/mm/yy',
                changeMonth: true,
                changeYear: true,
                showOtherMonths: true,
                showButtonPanel: true,
                defaultDate: new JalaliDate(iCurrentYear, iCurrentMonth - 1, iCurrentDay)
            };
            $("#datepicker7").datepicker(pickerOpts);
        }
        function OnSelectCalendar() {
            var a = $('#datepicker7').val()
            var arr = a.split('/');
            oCurrentDate.Year = arr[2];
            oCurrentDate.Month = arr[1];
            oCurrentDate.Day = arr[0];

            if (window.returnValue == null)
                window.returnValue = oCurrentDate;
            window.close();
        }
        function Window_OnUnload() {
            if (window.returnValue == null)
                window.returnValue = oCurrentDate;
            return;
        }
        function Window_Keypress() {
            if (event.keyCode == 27)
                window.close();
        }
		</script>
</head>
<body onkeypress="Window_Keypress()" style="overflow:hidden" onload="Window_Onload()" onunload="Window_OnUnload()">
          <p class='ui-widget-content'>
            <span id="datepicker7"></span>
          </p>
</body>
</html>
